
{% import "bootstrap/wtf.html" as wtf %}

{% include 'header.html' %}

	<main>
		<div class="container mt-4">
			<div class="row d-flex align-items-center">
				<div class="col-lg-6">
					<h2>My Pipeline</h2>
				</div>
			
				<div class="col-lg-6 d-flex justify-content-end">
					<a class="btn btn-primary" href="{{url_for('pipeline_new', form=form)}}">Add Interview</a>
				</div>
			</div>
			<hr>
			{% if interviews|length == 0 %}
			<p>You don't have interviews in your pipeline. Please click on Add Interview button above to proceed with your first interview scheduling. Enjoy working with our CRM!</p>
			{% else %}
			<table class="table">
				  <thead>
				    <tr>
				      <th scope="col">#</th>
					    <th scope="col">Owner</th>
				      <th scope="col">Name</th>
				      <th scope="col">Surname</th>
				      <th scope="col">Email</th>
					    <th scope="col">Phone</th>
					    <th scope="col">Role</th>
					    <th scope="col">Req ID</th>
					    <th scope="col">Recruiter</th>
					    <th scope="col">Interviewers</th>
					    <th scope="col">Date</th>
					    <th scope="col">Time</th>
					    <th scope="col">Actions</th>
				    </tr>
				  </thead>
				  <tbody>
				  {% for interview in interviews %}
				    <tr>
				      <th scope="row">{{interview.id}}</th>
					    <td>{{interview.created_by.full_name}}</td>
				      <td>{{interview.first_name}}</td>
				      <td>{{interview.last_name}}</td>
				      <td>{{interview.email}}</td>
					    <td>{{interview.phone}}</td>
					    <td>{{interview.role}}</td>
					    <td>{{interview.req_id}}</td>
					    <td>{{interview.recruiter}}</td>
					    <td>{{interview.interviewers}}</td>
					    <td>{{interview.date}}</td>
					    <td>{{interview.time}}</td>
					    <td>
						    <a href="{{url_for('pipeline_edit', interview_id=interview.id)}}">
							    <i class="fa-solid fa-pen-to-square p-1" title="edit template"></i>
						    <a href="{{url_for('pipeline_delete', interview_id=interview.id)}}">
						        <i class="fa-solid fa-ban p-1" title="delete template"></i>
					        </a>
					    </td>
				    </tr>
				  {% endfor %}
				  
				  </tbody>
				</table>
			{% endif %}
		</div>
	</main>
	{{ ckeditor.load() }}
	{{ ckeditor.config(name='text') }}
{% include 'footer.html' %}